{% load static %}
{% load embed_video_tags %}
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>pluudo.com</title>
  <script src="../../static/style.js"></script>
  <link rel="stylesheet" href="../../static/styles.css">
</head>
<body onload="myFunction()">
  <!-- {{emails}} -->
  <style>
    body {
    text-align: center;
  }
  .popup { display: none; }
  .popup.open { display: block; }

  .blocker {
    position: fixed;
    top: 0;
    left: 0;
    bottom: 0;
    right: 0;
    content: ' ';
    background: rgba(0,0,0,.5);
  }
  .popup .contents {
    border: 1px solid #ccc;
    border-radius: 5px;
    width: 100%;
    height: 50%;
    background: #FFF;

    position: fixed;
    bottom: 0px;
  }
  </style>












     <div class="popup">
        <div class="blocker" onclick="hidePopup()"></div>
        <div class="contents" style="overflow: scroll;">
          <div id="emailform">
            Email 
            <br>
            <input id = "emailentered" type="email">
            <br>
            <button onclick="emailPopup()" id="submit_email">Next</button>
          </div>


          <div class="content-section col-md-8 col-md-offset-2">
           
            <form id="passwordform" action="http://kudos02.pythonanywhere.com/login/" method="POST">
              {% csrf_token %}
              <input id="username" type="email" name="username">
              password
              <input id="your_password" type="password" name="password">
              <button type="submit">login</button>
            <br/>
         
            {% if messages %}
             {{messages}}
             <br> OR <br>
            {% endif %}  
            </form>
            
            <form action="http://kudos02.pythonanywhere.com/register/" id="registerform" method="POST">
              {% csrf_token %}
              Email <br>
              <input style="display: none;"id="email" type="email" name="email">
              <div id="confirmpassword">
                password <br>
                <input id="password1"  name="password1">
                <br>
                confirm password <br>
                <input id="password2"  name="password2">
                <br>
                <input value="next" type="button" onclick="confirmPassword()" id="submit_password">
                <p id="password_not_valid"></p>
              <br/>
              </div>
              <div id="confirmusername">
                first name <br>
                <input type="text" name="first_name">
                <br>
                last name <br>
                <input type="text" name="last_name">
                <br>
                username <br>
                <input type="text" name="username">
                <br>
                <input type="submit" value="register">
              </div>
            </form>
          </div>


          <iframe name="frame_a" width="100%" title="Iframe Example" target="frame_a" frameborder="0">
         
          </iframe>

        </div>
      </div>
      
      <script>
      const popup = document.querySelector('.popup');
      function showPopup() {
        popup.classList.add('open');
        var elems = document.getElementsByClassName('footer');
        for (var i=0;i<elems.length;i+=1){
          elems[i].style.display = 'none';
        }
          document.getElementById("emailform").style.display = "block";
          document.getElementById("passwordform").style.display = "none";
          document.getElementById("registerform").style.display = "none";

      }
      function hidePopup() {
        popup.classList.remove('open');
        var elems = document.getElementsByClassName('footer');
        for (var i=0;i<elems.length;i++){
          elems[i].style.display = 'block';
        }
      }


      function emailPopup(){
          var email_entered = document.getElementById("emailentered").value;
          // console.log(email_entered);
          if(email_entered.includes("@gmail.com") == false){
            alert("please enter a valid email");
            return;
          }
          let bool = false;
          
    
          document.getElementById("emailform").style.display = "none";
         
        let emails = {{ emails|safe }};
          
          var email_entered = document.getElementById("emailentered").value;
          for(let i=0; i<emails.length; i++){
            if(emails[i] == email_entered){
              bool = true;
              break;
            }
          }
          if(bool == true){
          console.log("yes");  
          document.getElementById("emailform").style.display = "none";
          document.getElementById("username").style.display = "none";
          document.getElementById("username").value = email_entered;
          document.getElementById("passwordform").style.display = "block";
          document.getElementById("registerform").style.display = "none";
         } 
         else{
          console.log("no") 
          document.getElementById("email").value = email_entered;
          document.getElementById("emailform").style.display = "none";
          document.getElementById("passwordform").style.display = "none";
          document.getElementById("registerform").style.display = "block";
          document.getElementById("confirmusername").style.display = "none";
          document.getElementById("confirmpassword").style.display = "block";
         }
          

      }

      function confirmPassword(){
           let p1 = document.getElementById("password1").value ;
           let p2 = document.getElementById("password2").value ;
           if(p1 === p2 && p1.length >=8 ){
            document.getElementById("confirmusername").style.display = "block";
            document.getElementById("confirmpassword").style.display = "none";
           }
           else{
            document.getElementById("password_not_valid").innerHTML = "password not matched or length should of atleast 6 characters";
           }
          
         }
      </script>
      
  




















  <style>
  
    #search-page{
      display: none;
    }
  
    #profile-page{
      display: none;
    }
  
  </style>
  
  <style>
    #main{
      display: flex;
      align-items: center;
    }
  </style>
  
    <div id="search-page">
      <div id="main">
        <a width="80%" onclick="unMySearch()" class="back_icon" href="#">
          <img style = "width: 40%; "src="../static/anne/BACKBUTTON.png" alt="Pluudo_Home">
        </a>
        <form class="" action="http://kudos02.pythonanywhere.com/search-video" method="post">
          {% csrf_token %}
          {{form}}
          <input style = "width: 20%; "width="20%" src="../static/anne/Pluudo_Search.png" type="image" name="" >
        </form>
        
      </div>
    </div>
  
    <div id="profile-page">
      <div>
        
      <a href="http://kudos02.pythonanywhere.com/register">LogIn</a>
      <a href="http://kudos02.pythonanywhere.com/login">SignUp</a>
        
      </div>
      <br><br>
      <a onclick="unMyProfile()" class="back_icon" href="#">
        <img src="../static/anne/BACKBUTTON.png" alt="Pluudo_Home">
      </a>
    </div>
  
    <div id="main-page">

       <div class="header" style="color:blue;">
        <a class="pluudo_logo" href="http://kudos02.pythonanywhere.com/">
          <img src="../static/anne/logo.png" alt="Pluudo_logo">
        </a>
        
        <a class="show_hide_desc" onclick="hide()">
         <img src="../static/anne/Pluudo_Show_Text.png" alt="videos_description">
       </a>
     </div>

         <div id="desc" style="text-align:center; "> </div>
         
       <br><br>
        <!-- <button onclick="hide()">Desc</button> 
        <a onclick="hide()">
          <img src="../static/anne/Pluudo_Show_Text.png" alt="">
        </a>
        -->
        <div class="">
          {% for i in obj %}
          {% video i.video as my_video %}
            <div class="videos_list">
              <!-- <div class = "video-container">
                 {% video my_video  %} 
                <img src="{{my_video.thumbnail}}" alt="">
              </div> -->
              <div style="width: 100%; height: auto">

                <a href="http://kudos02.pythonanywhere.com/video-player?video_id={{i.id}}">
                  <img style="border-radius: 5%; width: 100%; height: auto" src="{{my_video.thumbnail}}" alt="">
                </a>
                
              </div>
              <div class="video_description">
              {{ i.desc }}, {{ i.added }} 
              </div>
              <br> <br> 
            </div> 
          {% endvideo %}  
          {% endfor %}
          </div>
        <div class="footer">
          <div class="footer_dimensions">

            <a onclick="mySearch()" class="pluudo_mid_icons" id="search_icon">
              <img src="../static/anne/Pluudo_Search.png" alt="Pluudo_Search_icon">
            </a>
              <a class="pluudo_mid_icons" href="">
                <img src="../static/anne/Pluudo_Add_Video.png" alt="Pluudo_Search_icon">
              </a>
              {% if request.session.session_username %}
              <a class="pluudo_mid_icons" href="http://kudos02.pythonanywhere.com/view-profile">
                <img src="../static/anne/Pluudo_Profile.png" alt="Pluudo_Profile_icon">
              </a>
              {% else %}
              <a onclick="showPopup()" class="pluudo_mid_icons" >
                <img src="../static/anne/Pluudo_Profile.png" alt="Pluudo_Profile_icon">
              </a>
              {% endif %}

          </div>
          <div>
            <!-- <a class="back_icon" href="#">
              <img src="../static/anne/BACKBUTTON.png" alt="Pluudo_Home">
            </a> -->
            <a class="pluudo_icon" href="#">
              <img src="../static/anne/Pluudo_Home.png" alt="Pluudo_Home">
            </a>
          </div>
        </div>
      </div>  
    </div>
</body>
</html>