{% load static %}
{% load embed_video_tags %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/video.js/7.12.0/video-js.min.css" />
    <link rel="stylesheet" href="../../static/styles.css">
</head>
<body>

  <style>

    div#sticky {
      position: sticky;
      top: 0;
      z-index: 1;
    }
    body {
    text-align: center;
  }
    
  </style>

    <!-- {% video my_video.video as myvideo %}
      <div id="sticky">
        {% if "youtube" in myvideo.url %}
        <iframe src="{{myvideo.url}}&autoplay=1&mute=1" style="position: relative; height: 17em;
        width: 100%;" allow="autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
        {% endif %}
        {% if "youtube" not in  myvideo.url %}
        <iframe src="{{myvideo.url}}?autoplay=1&muted=1" style="position: relative; height: 17em;
        width: 100%;" allow="autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
        {% endif %}
      </div>
        <div style="text-align: center;">
          <a href="{{myvideo.url}}">see on official website</a>
        </div>
      </div>
    {% endvideo %} -->

    {% if "vimeo" in my_video.video_url %}
      <iframe src="https://player.vimeo.com/video/{{my_video.video_platform_id}}"
      width="100%" height="100%" frameborder="0" allow="autoplay; fullscreen" allowfullscreen></iframe>
    {% elif "dailymotion" in my_video.video_url %}
      <iframe id="player" frameborder="0" allowfullscreen="true" allow="autoplay" 
      src="https://www.dailymotion.com/embed/video/{{my_video.video_platform_id}}"
      width="100%" height="100%"></iframe>
    {% else %}        
    <video
    id="my-video"
    class="video-js"
    controls
    autoplay
    width="450"
    height="340"
    data-setup="{}">
   <source src="{{my_video.video_url}}" type="video/youtube" /> 
  
  </video>     
    {% endif %}

    <div class="video_description">
          {{my_video.video_owner}}
           <br>
          {{my_video.video_title}}
    </div>

    <h1 style="text-align: center;">Similar videos</h1>
    <div class="">
      {% for i in obj %}
        <div class="videos_list">
          <!-- <div class = "video-container">
             {% video my_video  %} 
            <img src="{{my_video.thumbnail}}" alt="">
          </div> -->
          <div style="width: 100%; height: auto">

            <a href="http://kudos02.pythonanywhere.com/video-player?video_id={{i.id}}">
              <img style="border-radius: 5%; width: 100%; height: auto" src="{{i.video_thumbnail}}" alt="">
            </a>
            
          </div>
          <div class="video_description">
          {{i.video_owner}} 
              <br>
          {{i.video_title}}
          </div>
          <br> <br> 
        </div>  
      {% endfor %}
    </div>
    <div class="footer">
      <div class="footer_dimensions">

          <a class="pluudo_mid_icons" href="">
            <img src="../static/anne/Pluudo_Search.png" alt="Pluudo_Search_icon">
          </a>
          <a class="pluudo_mid_icons" href="">
            <img src="../static/anne/Pluudo_Add_Video.png" alt="Pluudo_Search_icon">
          </a>
          <a class="pluudo_mid_icons" href="">
            <img src="../static/anne/Pluudo_Profile.png" alt="Pluudo_Profile_icon">
          </a>

      </div>
      <div>
        <a onclick="history.back()" class="back_icon" href="#">
          <img src="../static/anne/BACKBUTTON.png" alt="Pluudo_Home">
        </a>
        <a class="pluudo_icon" href="#">
          <img src="../static/anne/Pluudo_Home.png" alt="Pluudo_Home">
        </a>
      </div>
    </div>

    <script>
      import axios, { AxiosRequestConfig } from "axios";

    const getMetadata = async () => {
      const videoUrl = "https://www.youtube.com/watch?v=dQw4w9WgXcQ";
      const requestUrl = `http://youtube.com/oembed?url=${videoUrl}&format=json`;
      const result = await axios.get(requestUrl);
      return result.data;
    };

    console.log(getMetadata);
    </script>
    <script
    src="https://cdnjs.cloudflare.com/ajax/libs/video.js/7.12.0/video.min.js"></script>
    
    <script
    src="https://cdnjs.cloudflare.com/ajax/libs/videojs-youtube/2.6.1/Youtube.min.js"></script>
</body>
</html>


